{"version":3,"file":"MinecraftAuth.js","sourceRoot":"/","sources":["MinecraftAuth.ts"],"names":[],"mappings":";;;;;;AAEA,sDAA8B;AAE9B,MAAa,aAAa;IAItB,YACqB,eAAgF;QAAhF,oBAAe,GAAf,eAAe,CAAiE;IAErG,CAAC;IAED,KAAK,CAAC,kBAAkB,CAAC,WAAmB;QACxC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAA;QAChD,MAAM,oBAAoB,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC;YACtE,MAAM,EAAE,KAAK;YACb,GAAG,EAAE,wDAAwD;YAC7D,OAAO,EAAE;gBACL,aAAa,EAAE,UAAW,WAAY,EAAE;aAC3C;SACJ,CAAC,CAAC;QACH,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,IAAI,CAAC;QACnD,+BAA+B;QAC/B,gCAAgC;QAChC,OAAO,gBAAgB,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,gBAAgB,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IAC5F,CAAC;IAEM,KAAK,CAAC,UAAU,CAAC,WAAmB;QACvC,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,wBAAwB,CAAC;YACjE,MAAM,EAAE,KAAK;YACb,GAAG,EAAE,oBAAoB;YACzB,OAAO,EAAE;gBACL,eAAe,EAAE,UAAU,WAAW,EAAE;aAC3C;SACJ,CAAC,CAAC;QACH,OAAO,QAAQ,CAAC,IAAI,CAAC;IACzB,CAAC;;AAjCL,sCAmCC;AAjCU,oBAAM,GAAmB,iBAAO,CAAC,YAAY,EAAE,CAAC","sourcesContent":["import { RequestHandlers } from \"./types/RequestHandler\";\r\nimport { BasicMojangProfile } from \"@mineskin/types\";\r\nimport winston from \"winston\";\r\n\r\nexport class MinecraftAuth {\r\n\r\n    static logger: winston.Logger = winston.createLogger();\r\n\r\n    constructor(\r\n        private readonly requestHandlers: RequestHandlers<'minecraftServices'|'minecraftServicesProfile'>\r\n    ) {\r\n    }\r\n\r\n    async checkGameOwnership(accessToken: string): Promise<boolean> {\r\n        MinecraftAuth.logger.debug(\"checkGameOwnership\")\r\n        const entitlementsResponse = await this.requestHandlers.minecraftServices({\r\n            method: \"GET\",\r\n            url: \"https://api.minecraftservices.com/entitlements/mcstore\",\r\n            headers: {\r\n                Authorization: `Bearer ${ accessToken }`\r\n            }\r\n        });\r\n        const entitlementsBody = entitlementsResponse.data;\r\n        // console.log(\"entitlements\");\r\n        // console.log(entitlementsBody)\r\n        return entitlementsBody.hasOwnProperty(\"items\") && entitlementsBody[\"items\"].length > 0;\r\n    }\r\n\r\n    public async getProfile(accessToken: string): Promise<BasicMojangProfile> {\r\n        const response = await this.requestHandlers.minecraftServicesProfile({\r\n            method: \"GET\",\r\n            url: \"/minecraft/profile\",\r\n            headers: {\r\n                \"Authorization\": `Bearer ${accessToken}`\r\n            }\r\n        });\r\n        return response.data;\r\n    }\r\n\r\n}\r\n"]}